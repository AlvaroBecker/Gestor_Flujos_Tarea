--------------------------------------------------------
-- Archivo creado  - martes-noviembre-08-2022   
--------------------------------------------------------
--------------------------------------------------------
--  DDL for Sequence OSDDMW_DIAGRAMS_ID_SEQAI
--------------------------------------------------------

   CREATE SEQUENCE  "PROCESSDB"."OSDDMW_DIAGRAMS_ID_SEQAI"  MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 2 NOCACHE  NOORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL ;
--------------------------------------------------------
--  DDL for Table AVANCE
--------------------------------------------------------

  CREATE TABLE "PROCESSDB"."AVANCE" 
   (	"ID_AVANCE" NUMBER GENERATED ALWAYS AS IDENTITY MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE , 
	"FK_TAREA" NUMBER, 
	"PORCENTAJE" NUMBER
   ) SEGMENT CREATION DEFERRED 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Table CARGA
--------------------------------------------------------

  CREATE TABLE "PROCESSDB"."CARGA" 
   (	"ID_CARGA" NUMBER GENERATED ALWAYS AS IDENTITY MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE , 
	"FK_USUARIO_C" NUMBER, 
	"FK_TAREA_C" NUMBER, 
	"PORCENTAJE" NUMBER
   ) SEGMENT CREATION DEFERRED 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Table CONTRATO
--------------------------------------------------------

  CREATE TABLE "PROCESSDB"."CONTRATO" 
   (	"ID_CONTRATO" NUMBER GENERATED BY DEFAULT AS IDENTITY MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE , 
	"TIPO_CONTRATO" VARCHAR2(32 BYTE) DEFAULT 'SIN ASIGNAR', 
	"FEC_INI" DATE, 
	"FEC_TER" DATE
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Table FLUJO
--------------------------------------------------------

  CREATE TABLE "PROCESSDB"."FLUJO" 
   (	"ID_FLUJO" NUMBER GENERATED BY DEFAULT AS IDENTITY MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE , 
	"DESCRIPCION" VARCHAR2(256 BYTE), 
	"FEC_CREACION" DATE, 
	"FEC_INI" DATE, 
	"FEC_TER" DATE, 
	"ESTADO" VARCHAR2(32 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Table PROC_LOGS
--------------------------------------------------------

  CREATE TABLE "PROCESSDB"."PROC_LOGS" 
   (	"PRCL_DATE" TIMESTAMP (3), 
	"PRCL_ORACLE_SID" NUMBER(18,0), 
	"PRCL_LEVEL" CHAR(5 BYTE), 
	"PRCL_MESSAGE" VARCHAR2(4000 BYTE)
   ) SEGMENT CREATION DEFERRED 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Table RESPONSABLE_FLUJO
--------------------------------------------------------

  CREATE TABLE "PROCESSDB"."RESPONSABLE_FLUJO" 
   (	"ID_RES_FLUJO" NUMBER GENERATED BY DEFAULT AS IDENTITY MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE , 
	"FK_USR" NUMBER(*,0), 
	"FK_FLUJO" NUMBER(*,0)
   ) SEGMENT CREATION DEFERRED 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Table RESPONSABLE_TAREA
--------------------------------------------------------

  CREATE TABLE "PROCESSDB"."RESPONSABLE_TAREA" 
   (	"ID_RES_TAREA" NUMBER GENERATED BY DEFAULT AS IDENTITY MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE , 
	"FK_USR_RT" NUMBER(*,0), 
	"FK_TAREA_RT" NUMBER(*,0)
   ) SEGMENT CREATION DEFERRED 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Table ROL
--------------------------------------------------------

  CREATE TABLE "PROCESSDB"."ROL" 
   (	"ID_ROL" NUMBER GENERATED BY DEFAULT AS IDENTITY MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE , 
	"NOMBRE_ROL" VARCHAR2(32 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Table TAREA
--------------------------------------------------------

  CREATE TABLE "PROCESSDB"."TAREA" 
   (	"ID_TAREA" NUMBER GENERATED BY DEFAULT AS IDENTITY MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE , 
	"DESCRIPCION" VARCHAR2(256 BYTE), 
	"PRIORIDAD" NUMBER(*,0), 
	"CATEGORIA" VARCHAR2(32 BYTE), 
	"FEC_CREACION" DATE, 
	"FEC_INI" DATE, 
	"FEC_TER" DATE, 
	"ESTADO" VARCHAR2(16 BYTE)
   ) SEGMENT CREATION DEFERRED 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Table TAREA_ASOC
--------------------------------------------------------

  CREATE TABLE "PROCESSDB"."TAREA_ASOC" 
   (	"ID_TAREA_ASOC" NUMBER GENERATED ALWAYS AS IDENTITY MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE , 
	"FK_TAREA" NUMBER, 
	"FK_FLUJO" NUMBER, 
	"ESTADO" CHAR(1 BYTE) DEFAULT 'P'
   ) SEGMENT CREATION DEFERRED 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  TABLESPACE "USERS" ;

   COMMENT ON TABLE "PROCESSDB"."TAREA_ASOC"  IS 'Tabla creacion de tareas asociadas o tareas subordinadas, tambien para monitoreo de progreso';
--------------------------------------------------------
--  DDL for Table TAREA_ROL
--------------------------------------------------------

  CREATE TABLE "PROCESSDB"."TAREA_ROL" 
   (	"ID_TR" NUMBER GENERATED ALWAYS AS IDENTITY MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE , 
	"NOMBRE_ROL" VARCHAR2(64 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Table UNIDAD_INTERNA
--------------------------------------------------------

  CREATE TABLE "PROCESSDB"."UNIDAD_INTERNA" 
   (	"ID_UNIDAD" NUMBER GENERATED BY DEFAULT AS IDENTITY MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE , 
	"NOMBRE_UNIDAD" VARCHAR2(32 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Table USUARIO
--------------------------------------------------------

  CREATE TABLE "PROCESSDB"."USUARIO" 
   (	"ID_USR" NUMBER GENERATED BY DEFAULT AS IDENTITY MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE , 
	"NOMBRE_FULL" VARCHAR2(70 BYTE), 
	"RUT" VARCHAR2(12 BYTE), 
	"USERNAME" VARCHAR2(64 BYTE), 
	"PASSWORD" VARCHAR2(256 BYTE), 
	"FEC_NAC" DATE, 
	"GENERO" VARCHAR2(16 BYTE), 
	"FK_ROL" NUMBER(*,0), 
	"FK_UNIDAD" NUMBER(*,0), 
	"FK_CONTRATO" NUMBER(*,0) DEFAULT 1
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
REM INSERTING into PROCESSDB.AVANCE
SET DEFINE OFF;
REM INSERTING into PROCESSDB.CARGA
SET DEFINE OFF;
REM INSERTING into PROCESSDB.CONTRATO
SET DEFINE OFF;
Insert into PROCESSDB.CONTRATO (ID_CONTRATO,TIPO_CONTRATO,FEC_INI,FEC_TER) values ('1','Sin Asignar',to_date('01/01/01','DD/MM/RR'),to_date('01/01/01','DD/MM/RR'));
REM INSERTING into PROCESSDB.FLUJO
SET DEFINE OFF;
Insert into PROCESSDB.FLUJO (ID_FLUJO,DESCRIPCION,FEC_CREACION,FEC_INI,FEC_TER,ESTADO) values ('1','Pruba Flujo',to_date('08/11/22','DD/MM/RR'),to_date('08/11/22','DD/MM/RR'),to_date('08/11/22','DD/MM/RR'),'Cerrado');
REM INSERTING into PROCESSDB.PROC_LOGS
SET DEFINE OFF;
REM INSERTING into PROCESSDB.RESPONSABLE_FLUJO
SET DEFINE OFF;
REM INSERTING into PROCESSDB.RESPONSABLE_TAREA
SET DEFINE OFF;
REM INSERTING into PROCESSDB.ROL
SET DEFINE OFF;
Insert into PROCESSDB.ROL (ID_ROL,NOMBRE_ROL) values ('1','Administrador');
Insert into PROCESSDB.ROL (ID_ROL,NOMBRE_ROL) values ('2','Funcionario');
Insert into PROCESSDB.ROL (ID_ROL,NOMBRE_ROL) values ('3','Diseñador');
REM INSERTING into PROCESSDB.TAREA
SET DEFINE OFF;
REM INSERTING into PROCESSDB.TAREA_ASOC
SET DEFINE OFF;
REM INSERTING into PROCESSDB.TAREA_ROL
SET DEFINE OFF;
Insert into PROCESSDB.TAREA_ROL (ID_TR,NOMBRE_ROL) values ('1','Tester');
Insert into PROCESSDB.TAREA_ROL (ID_TR,NOMBRE_ROL) values ('2','Director de HR');
Insert into PROCESSDB.TAREA_ROL (ID_TR,NOMBRE_ROL) values ('3','Contador');
Insert into PROCESSDB.TAREA_ROL (ID_TR,NOMBRE_ROL) values ('4','CEO');
Insert into PROCESSDB.TAREA_ROL (ID_TR,NOMBRE_ROL) values ('5','Director de Supply Chain');
Insert into PROCESSDB.TAREA_ROL (ID_TR,NOMBRE_ROL) values ('6','Gerente');
REM INSERTING into PROCESSDB.UNIDAD_INTERNA
SET DEFINE OFF;
Insert into PROCESSDB.UNIDAD_INTERNA (ID_UNIDAD,NOMBRE_UNIDAD) values ('1','Unidad de Prueba');
Insert into PROCESSDB.UNIDAD_INTERNA (ID_UNIDAD,NOMBRE_UNIDAD) values ('2','Recursos Humanos');
Insert into PROCESSDB.UNIDAD_INTERNA (ID_UNIDAD,NOMBRE_UNIDAD) values ('3','Contabilidad');
Insert into PROCESSDB.UNIDAD_INTERNA (ID_UNIDAD,NOMBRE_UNIDAD) values ('4','Direccion');
Insert into PROCESSDB.UNIDAD_INTERNA (ID_UNIDAD,NOMBRE_UNIDAD) values ('5','Logistica');
Insert into PROCESSDB.UNIDAD_INTERNA (ID_UNIDAD,NOMBRE_UNIDAD) values ('6','Administracion');
REM INSERTING into PROCESSDB.USUARIO
SET DEFINE OFF;
Insert into PROCESSDB.USUARIO (ID_USR,NOMBRE_FULL,RUT,USERNAME,PASSWORD,FEC_NAC,GENERO,FK_ROL,FK_UNIDAD,FK_CONTRATO) values ('1','ALVARO BECKER','12345678-9','ABECKER','admin',to_date('01/09/22','DD/MM/RR'),'M','1','1','1');
Insert into PROCESSDB.USUARIO (ID_USR,NOMBRE_FULL,RUT,USERNAME,PASSWORD,FEC_NAC,GENERO,FK_ROL,FK_UNIDAD,FK_CONTRATO) values ('2','joaquin rojas','22222222-2','JROJAS','pass',to_date('01/01/00','DD/MM/RR'),'M','1','1','1');
Insert into PROCESSDB.USUARIO (ID_USR,NOMBRE_FULL,RUT,USERNAME,PASSWORD,FEC_NAC,GENERO,FK_ROL,FK_UNIDAD,FK_CONTRATO) values ('3','Nicolas Oportus','22222222-2','NOOPORTUS','admin',to_date('01/01/00','DD/MM/RR'),'M','1','1','1');
Insert into PROCESSDB.USUARIO (ID_USR,NOMBRE_FULL,RUT,USERNAME,PASSWORD,FEC_NAC,GENERO,FK_ROL,FK_UNIDAD,FK_CONTRATO) values ('7','Thanos Marvel','22222222-2','TMARVEL','admin',to_date('01/01/00','DD/MM/RR'),'M','1','1','1');
Insert into PROCESSDB.USUARIO (ID_USR,NOMBRE_FULL,RUT,USERNAME,PASSWORD,FEC_NAC,GENERO,FK_ROL,FK_UNIDAD,FK_CONTRATO) values ('8','Pepe Voraz','22222222-2','PVORAZ','admin',to_date('01/01/00','DD/MM/RR'),'M','1','1','1');
Insert into PROCESSDB.USUARIO (ID_USR,NOMBRE_FULL,RUT,USERNAME,PASSWORD,FEC_NAC,GENERO,FK_ROL,FK_UNIDAD,FK_CONTRATO) values ('9','Fernando Soto','22222222-2','FSOTO','admin',to_date('01/01/00','DD/MM/RR'),'M','1','1','1');
Insert into PROCESSDB.USUARIO (ID_USR,NOMBRE_FULL,RUT,USERNAME,PASSWORD,FEC_NAC,GENERO,FK_ROL,FK_UNIDAD,FK_CONTRATO) values ('14','Mario Castaneda','11222333-4','MCASTANEDA','11222',to_date('04/11/22','DD/MM/RR'),'M','3','3','1');
Insert into PROCESSDB.USUARIO (ID_USR,NOMBRE_FULL,RUT,USERNAME,PASSWORD,FEC_NAC,GENERO,FK_ROL,FK_UNIDAD,FK_CONTRATO) values ('20','asdadasf afasdasf','11222333-4','AAFASDASF','11222',to_date('10/11/22','DD/MM/RR'),'M','1','1','1');
Insert into PROCESSDB.USUARIO (ID_USR,NOMBRE_FULL,RUT,USERNAME,PASSWORD,FEC_NAC,GENERO,FK_ROL,FK_UNIDAD,FK_CONTRATO) values ('21','alex elleon','11222333-4','AELLEON','11222',to_date('10/11/22','DD/MM/RR'),'M','1','1','1');
Insert into PROCESSDB.USUARIO (ID_USR,NOMBRE_FULL,RUT,USERNAME,PASSWORD,FEC_NAC,GENERO,FK_ROL,FK_UNIDAD,FK_CONTRATO) values ('25','dasfdsa afdsf','11222333-4','DAFDSF','11222',to_date('11/11/22','DD/MM/RR'),'M','1','1','1');
Insert into PROCESSDB.USUARIO (ID_USR,NOMBRE_FULL,RUT,USERNAME,PASSWORD,FEC_NAC,GENERO,FK_ROL,FK_UNIDAD,FK_CONTRATO) values ('10','Maria Magdalena','11222333-4','MMAGDALENA','11222',to_date('05/11/22','DD/MM/RR'),'M','1','1','1');
Insert into PROCESSDB.USUARIO (ID_USR,NOMBRE_FULL,RUT,USERNAME,PASSWORD,FEC_NAC,GENERO,FK_ROL,FK_UNIDAD,FK_CONTRATO) values ('11','Jesus Nazareno','11222333-4','JNAZARENO','11222',to_date('05/11/22','DD/MM/RR'),'M','1','1','1');
Insert into PROCESSDB.USUARIO (ID_USR,NOMBRE_FULL,RUT,USERNAME,PASSWORD,FEC_NAC,GENERO,FK_ROL,FK_UNIDAD,FK_CONTRATO) values ('12','Squartle quartle','11222333-4','SQUARTLE','11222',to_date('04/11/22','DD/MM/RR'),'M','2','4','1');
Insert into PROCESSDB.USUARIO (ID_USR,NOMBRE_FULL,RUT,USERNAME,PASSWORD,FEC_NAC,GENERO,FK_ROL,FK_UNIDAD,FK_CONTRATO) values ('13','Leo Dicaprio','11222333-4','LDICAPRIO','11222',to_date('04/11/22','DD/MM/RR'),'M','3','4','1');
Insert into PROCESSDB.USUARIO (ID_USR,NOMBRE_FULL,RUT,USERNAME,PASSWORD,FEC_NAC,GENERO,FK_ROL,FK_UNIDAD,FK_CONTRATO) values ('15','dsagfdsa gsagfsdfg','11222333-4','DGSAGFSDFG','11222',to_date('04/11/22','DD/MM/RR'),'M','1','1','1');
Insert into PROCESSDB.USUARIO (ID_USR,NOMBRE_FULL,RUT,USERNAME,PASSWORD,FEC_NAC,GENERO,FK_ROL,FK_UNIDAD,FK_CONTRATO) values ('16','dasfds sdafdsa','11222333-4','DSDAFDSA','11222',to_date('11/11/22','DD/MM/RR'),'M','1','1','1');
Insert into PROCESSDB.USUARIO (ID_USR,NOMBRE_FULL,RUT,USERNAME,PASSWORD,FEC_NAC,GENERO,FK_ROL,FK_UNIDAD,FK_CONTRATO) values ('17','dsafsda fdasfdas','11222333-4','DFDASFDAS','11222',to_date('18/11/22','DD/MM/RR'),'M','1','1','1');
Insert into PROCESSDB.USUARIO (ID_USR,NOMBRE_FULL,RUT,USERNAME,PASSWORD,FEC_NAC,GENERO,FK_ROL,FK_UNIDAD,FK_CONTRATO) values ('22','elperro conrabia','11222333-4','ECONRABIA','11222',to_date('17/11/22','DD/MM/RR'),'Otro','2','3','1');
--------------------------------------------------------
--  DDL for Index AVANCE_PK
--------------------------------------------------------

  CREATE UNIQUE INDEX "PROCESSDB"."AVANCE_PK" ON "PROCESSDB"."AVANCE" ("ID_AVANCE") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Index CARGA_PK
--------------------------------------------------------

  CREATE UNIQUE INDEX "PROCESSDB"."CARGA_PK" ON "PROCESSDB"."CARGA" ("ID_CARGA") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Index CONTRATO_PK
--------------------------------------------------------

  CREATE UNIQUE INDEX "PROCESSDB"."CONTRATO_PK" ON "PROCESSDB"."CONTRATO" ("ID_CONTRATO") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Index FLUJO_PK
--------------------------------------------------------

  CREATE UNIQUE INDEX "PROCESSDB"."FLUJO_PK" ON "PROCESSDB"."FLUJO" ("ID_FLUJO") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Index RESPONSABLE_FLUJO_FK_FLUJO_UN
--------------------------------------------------------

  CREATE UNIQUE INDEX "PROCESSDB"."RESPONSABLE_FLUJO_FK_FLUJO_UN" ON "PROCESSDB"."RESPONSABLE_FLUJO" ("FK_FLUJO") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Index RESPONSABLE_FLUJO_FK_USR_UN
--------------------------------------------------------

  CREATE UNIQUE INDEX "PROCESSDB"."RESPONSABLE_FLUJO_FK_USR_UN" ON "PROCESSDB"."RESPONSABLE_FLUJO" ("FK_USR") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Index RESPONSABLE_FLUJO_PK
--------------------------------------------------------

  CREATE UNIQUE INDEX "PROCESSDB"."RESPONSABLE_FLUJO_PK" ON "PROCESSDB"."RESPONSABLE_FLUJO" ("ID_RES_FLUJO") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Index RESPONSABLE_TAREA_FK_TAREA_UN
--------------------------------------------------------

  CREATE UNIQUE INDEX "PROCESSDB"."RESPONSABLE_TAREA_FK_TAREA_UN" ON "PROCESSDB"."RESPONSABLE_TAREA" ("FK_TAREA_RT") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Index RESPONSABLE_TAREA_FK_USR_UN
--------------------------------------------------------

  CREATE UNIQUE INDEX "PROCESSDB"."RESPONSABLE_TAREA_FK_USR_UN" ON "PROCESSDB"."RESPONSABLE_TAREA" ("FK_USR_RT") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Index RESPONSABLE_TAREA_PK
--------------------------------------------------------

  CREATE UNIQUE INDEX "PROCESSDB"."RESPONSABLE_TAREA_PK" ON "PROCESSDB"."RESPONSABLE_TAREA" ("ID_RES_TAREA") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Index ROL_PK
--------------------------------------------------------

  CREATE UNIQUE INDEX "PROCESSDB"."ROL_PK" ON "PROCESSDB"."ROL" ("ID_ROL") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Index TAREA_ASOC_PK
--------------------------------------------------------

  CREATE UNIQUE INDEX "PROCESSDB"."TAREA_ASOC_PK" ON "PROCESSDB"."TAREA_ASOC" ("ID_TAREA_ASOC") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Index TAREA_PK
--------------------------------------------------------

  CREATE UNIQUE INDEX "PROCESSDB"."TAREA_PK" ON "PROCESSDB"."TAREA" ("ID_TAREA") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Index TAREA_ROL_PK
--------------------------------------------------------

  CREATE UNIQUE INDEX "PROCESSDB"."TAREA_ROL_PK" ON "PROCESSDB"."TAREA_ROL" ("ID_TR") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Index UNIDAD_INTERNA_PK
--------------------------------------------------------

  CREATE UNIQUE INDEX "PROCESSDB"."UNIDAD_INTERNA_PK" ON "PROCESSDB"."UNIDAD_INTERNA" ("ID_UNIDAD") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Index USUARIO_PK
--------------------------------------------------------

  CREATE UNIQUE INDEX "PROCESSDB"."USUARIO_PK" ON "PROCESSDB"."USUARIO" ("ID_USR") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Index AVANCE_PK
--------------------------------------------------------

  CREATE UNIQUE INDEX "PROCESSDB"."AVANCE_PK" ON "PROCESSDB"."AVANCE" ("ID_AVANCE") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Index CARGA_PK
--------------------------------------------------------

  CREATE UNIQUE INDEX "PROCESSDB"."CARGA_PK" ON "PROCESSDB"."CARGA" ("ID_CARGA") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Index CONTRATO_PK
--------------------------------------------------------

  CREATE UNIQUE INDEX "PROCESSDB"."CONTRATO_PK" ON "PROCESSDB"."CONTRATO" ("ID_CONTRATO") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Index FLUJO_PK
--------------------------------------------------------

  CREATE UNIQUE INDEX "PROCESSDB"."FLUJO_PK" ON "PROCESSDB"."FLUJO" ("ID_FLUJO") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Index RESPONSABLE_FLUJO_FK_FLUJO_UN
--------------------------------------------------------

  CREATE UNIQUE INDEX "PROCESSDB"."RESPONSABLE_FLUJO_FK_FLUJO_UN" ON "PROCESSDB"."RESPONSABLE_FLUJO" ("FK_FLUJO") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Index RESPONSABLE_FLUJO_FK_USR_UN
--------------------------------------------------------

  CREATE UNIQUE INDEX "PROCESSDB"."RESPONSABLE_FLUJO_FK_USR_UN" ON "PROCESSDB"."RESPONSABLE_FLUJO" ("FK_USR") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Index RESPONSABLE_FLUJO_PK
--------------------------------------------------------

  CREATE UNIQUE INDEX "PROCESSDB"."RESPONSABLE_FLUJO_PK" ON "PROCESSDB"."RESPONSABLE_FLUJO" ("ID_RES_FLUJO") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Index RESPONSABLE_TAREA_FK_TAREA_UN
--------------------------------------------------------

  CREATE UNIQUE INDEX "PROCESSDB"."RESPONSABLE_TAREA_FK_TAREA_UN" ON "PROCESSDB"."RESPONSABLE_TAREA" ("FK_TAREA_RT") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Index RESPONSABLE_TAREA_FK_USR_UN
--------------------------------------------------------

  CREATE UNIQUE INDEX "PROCESSDB"."RESPONSABLE_TAREA_FK_USR_UN" ON "PROCESSDB"."RESPONSABLE_TAREA" ("FK_USR_RT") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Index RESPONSABLE_TAREA_PK
--------------------------------------------------------

  CREATE UNIQUE INDEX "PROCESSDB"."RESPONSABLE_TAREA_PK" ON "PROCESSDB"."RESPONSABLE_TAREA" ("ID_RES_TAREA") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Index ROL_PK
--------------------------------------------------------

  CREATE UNIQUE INDEX "PROCESSDB"."ROL_PK" ON "PROCESSDB"."ROL" ("ID_ROL") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Index TAREA_PK
--------------------------------------------------------

  CREATE UNIQUE INDEX "PROCESSDB"."TAREA_PK" ON "PROCESSDB"."TAREA" ("ID_TAREA") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Index TAREA_ASOC_PK
--------------------------------------------------------

  CREATE UNIQUE INDEX "PROCESSDB"."TAREA_ASOC_PK" ON "PROCESSDB"."TAREA_ASOC" ("ID_TAREA_ASOC") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Index TAREA_ROL_PK
--------------------------------------------------------

  CREATE UNIQUE INDEX "PROCESSDB"."TAREA_ROL_PK" ON "PROCESSDB"."TAREA_ROL" ("ID_TR") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Index UNIDAD_INTERNA_PK
--------------------------------------------------------

  CREATE UNIQUE INDEX "PROCESSDB"."UNIDAD_INTERNA_PK" ON "PROCESSDB"."UNIDAD_INTERNA" ("ID_UNIDAD") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Index USUARIO_PK
--------------------------------------------------------

  CREATE UNIQUE INDEX "PROCESSDB"."USUARIO_PK" ON "PROCESSDB"."USUARIO" ("ID_USR") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Procedure PROC_LOG
--------------------------------------------------------
set define off;

  CREATE OR REPLACE EDITIONABLE PROCEDURE "PROCESSDB"."PROC_LOG" (pvar_level varchar2, pvar_message varchar2)
IS
BEGIN PRAGMA INLINE (PROC_LOG_LEVEL, 'NO');
    PROC_LOG_LEVEL(pvar_level, pvar_message);
EXCEPTION
    WHEN OTHERS THEN
    NULL;
END;


/
--------------------------------------------------------
--  DDL for Procedure PROC_LOG_LEVEL
--------------------------------------------------------
set define off;

  CREATE OR REPLACE EDITIONABLE PROCEDURE "PROCESSDB"."PROC_LOG_LEVEL" (pvar_level varchar2, pvar_message varchar2)
IS
BEGIN
    if case pvar_level 
       when 'trace' then 10
       when 'debug' then 20
       when 'info' then 30
       when 'warn' then 40
       when 'error' then 50
       when 'fatal' then 60
       else 99 end
     > 9 then
        PROC_LOG_WRITE(pvar_level,pvar_message,systimestamp);
    end if;
END;


/
--------------------------------------------------------
--  DDL for Procedure PROC_LOG_WRITE
--------------------------------------------------------
set define off;

  CREATE OR REPLACE EDITIONABLE PROCEDURE "PROCESSDB"."PROC_LOG_WRITE" (pvar_level varchar2, pvar_message varchar2, ptst_timestamp timestamp) IS PRAGMA AUTONOMOUS_TRANSACTION;  
BEGIN
    insert into proc_logs (prcl_date,prcl_oracle_sid,prcl_level,prcl_message) 
    values (ptst_timestamp,sys_context('USERENV','SID'),substr(pvar_level,1,5),substr(pvar_message,1,4000));
    commit;
END;


/
--------------------------------------------------------
--  DDL for Package MANTENEDOR_FLUJO
--------------------------------------------------------

  CREATE OR REPLACE NONEDITIONABLE PACKAGE "PROCESSDB"."MANTENEDOR_FLUJO" as 

PROCEDURE reset_data;

PROCEDURE add_flujo(
    nombre_full_p       IN VARCHAR2,
    rut_p               IN VARCHAR2,
    username_p          IN VARCHAR2,
    password_p          IN VARCHAR2,
    fec_nac_p           IN DATE,
    genero_p            IN VARCHAR2,
    fk_rol_p            IN NUMBER,
    fk_unidad_p         IN NUMBER
);

FUNCTION del_flujo (
    id_usr_p            IN NUMBER
) RETURN NUMBER;


PROCEDURE upt_flujo (
    id_usr_p            IN NUMBER,
    nombre_full_p       IN VARCHAR2,
    rut_p               IN VARCHAR2,
    username_p          IN VARCHAR2,
    password_p          IN VARCHAR2,
    fec_nac_p           IN DATE,
    genero_p            IN VARCHAR2,
    fk_rol_p            IN NUMBER,
    fk_unidad_p         IN NUMBER,
    fk_contrato_p       IN NUMBER
);


PROCEDURE list_all_flujo (
    id_usr_p    IN NUMBER,
    c_lista     OUT SYS_REFCURSOR
);

END;

/
--------------------------------------------------------
--  DDL for Package MANTENEDOR_TAREA
--------------------------------------------------------

  CREATE OR REPLACE NONEDITIONABLE PACKAGE "PROCESSDB"."MANTENEDOR_TAREA" as 

PROCEDURE reset_data;

PROCEDURE add_tarea (
    descripcion_p               IN VARCHAR2,
    prioridad_p                 IN VARCHAR2,
    categoria_p                 IN VARCHAR2,
    fec_creacion_p              IN DATE,
    fec_ini_p                   IN DATE,
    fec_ter_p                   IN DATE,
    estado_p                    IN CHAR
);

FUNCTION del_tarea (
    id_tarea_p            IN NUMBER
) RETURN NUMBER;


PROCEDURE upt_tarea (
    id_tarea_p                  IN NUMBER,
    descripcion_p               IN VARCHAR2,
    prioridad_p                 IN VARCHAR2,
    categoria_p                 IN VARCHAR2,
    fec_creacion_p              IN DATE,
    fec_ini_p                   IN DATE,
    fec_ter_p                   IN DATE,
    estado_p                    IN CHAR
);


PROCEDURE list_all_tarea (
    id_tarea_p    IN NUMBER,
    c_lista     OUT SYS_REFCURSOR
);

END;

/
--------------------------------------------------------
--  DDL for Package MANTENEDOR_USUARIO
--------------------------------------------------------

  CREATE OR REPLACE NONEDITIONABLE PACKAGE "PROCESSDB"."MANTENEDOR_USUARIO" as 

PROCEDURE reset_data;

PROCEDURE add_usr (
    nombre_full_p       IN VARCHAR2,
    rut_p               IN VARCHAR2,
    username_p          IN VARCHAR2,
    password_p          IN VARCHAR2,
    fec_nac_p           IN DATE,
    genero_p            IN VARCHAR2,
    fk_rol_p            IN NUMBER,
    fk_unidad_p         IN NUMBER
);

FUNCTION del_usr (
    id_usr_p            IN NUMBER
) RETURN NUMBER;


PROCEDURE upt_usr (
    id_usr_p            IN NUMBER,
    nombre_full_p       IN VARCHAR2,
    rut_p               IN VARCHAR2,
    username_p          IN VARCHAR2,
    password_p          IN VARCHAR2,
    fec_nac_p           IN DATE,
    genero_p            IN VARCHAR2,
    fk_rol_p            IN NUMBER,
    fk_unidad_p         IN NUMBER,
    fk_contrato_p       IN NUMBER
);


PROCEDURE list_all_usr (
    id_usr_p    IN NUMBER,
    c_lista     OUT SYS_REFCURSOR
);

END;

/
--------------------------------------------------------
--  DDL for Package Body MANTENEDOR_USUARIO
--------------------------------------------------------

  CREATE OR REPLACE NONEDITIONABLE PACKAGE BODY "PROCESSDB"."MANTENEDOR_USUARIO" IS

    --PROCEDIMIENTO RESET_DATA
    PROCEDURE reset_data
        AS
        BEGIN
            DELETE FROM usuario;
            EXECUTE IMMEDIATE ('ALTER TABLE usuario MODIFY id_usr GENERATED BY DEFAULT AS IDENTITY (START WITH 0)');
        END reset_data;

    --PROCEDIMIENTO ADD_USR

    PROCEDURE add_usr(
        nombre_full_p       IN VARCHAR2,
        rut_p               IN VARCHAR2,
        username_p          IN VARCHAR2,
        password_p          IN VARCHAR2,
        fec_nac_p           IN DATE,
        genero_p            IN VARCHAR2,
        fk_rol_p            IN NUMBER,
        fk_unidad_p         IN NUMBER
        )
    IS
    BEGIN
        INSERT INTO usuario(
            nombre_full,rut,username,password,fec_nac,genero,fk_rol,fk_unidad)
        VALUES(
            nombre_full_p,rut_p,username_p,password_p,fec_nac_p,genero_p,fk_rol_p,fk_unidad_p
        );
        COMMIT;
    END add_usr;

    --FUNCION ELIMINAR USUARIO

    FUNCTION del_usr(
        id_usr_p    IN NUMBER
    ) RETURN NUMBER IS
    del_id_usr_p NUMBER;

    BEGIN
        DELETE FROM usuario WHERE id_usr=id_usr_p
        RETURNING id_usr INTO del_id_usr_p;

        COMMIT;
        RETURN del_id_usr_p;
    END del_usr;

    --FUNCION UPDATE USUARIO

    PROCEDURE upt_usr (
    id_usr_p            IN NUMBER,
    nombre_full_p       IN VARCHAR2,
    rut_p               IN VARCHAR2,
    username_p          IN VARCHAR2,
    password_p          IN VARCHAR2,
    fec_nac_p           IN DATE,
    genero_p            IN VARCHAR2,
    fk_rol_p            IN NUMBER,
    fk_unidad_p         IN NUMBER,
    fk_contrato_p       IN NUMBER
)   IS
    result_p NUMBER;

    BEGIN



        SELECT COUNT(*)
        INTO result_p
        FROM usuario 
        WHERE id_usr=id_usr_p;

        IF (result_p=1) THEN
            UPDATE usuario 
            SET
                nombre_full=nombre_full_p,
                rut=rut_p,
                username=username_p,
                password=password_p,
                fec_nac=fec_nac_p,
                genero=genero_p,
                fk_rol=fk_rol_p,
                fk_unidad=fk_unidad_p,
                fk_contrato=fk_contrato_p
            WHERE id_usr=id_usr_p;
        ELSE 
            DBMS_OUTPUT.PUT_LINE('404');
        END IF;
    END upt_usr;


    PROCEDURE list_all_usr(
        id_usr_p    IN NUMBER,
        c_lista     OUT SYS_REFCURSOR
    )
    IS
    BEGIN
        OPEN c_lista FOR
            SELECT * FROM usuario;
    END list_all_usr;


END mantenedor_usuario;

/
--------------------------------------------------------
--  Constraints for Table AVANCE
--------------------------------------------------------

  ALTER TABLE "PROCESSDB"."AVANCE" MODIFY ("ID_AVANCE" NOT NULL ENABLE);
  ALTER TABLE "PROCESSDB"."AVANCE" MODIFY ("FK_TAREA" NOT NULL ENABLE);
  ALTER TABLE "PROCESSDB"."AVANCE" ADD CONSTRAINT "AVANCE_PK" PRIMARY KEY ("ID_AVANCE")
  USING INDEX "PROCESSDB"."AVANCE_PK"  ENABLE;
--------------------------------------------------------
--  Constraints for Table CARGA
--------------------------------------------------------

  ALTER TABLE "PROCESSDB"."CARGA" MODIFY ("ID_CARGA" NOT NULL ENABLE);
  ALTER TABLE "PROCESSDB"."CARGA" ADD CONSTRAINT "CARGA_PK" PRIMARY KEY ("ID_CARGA")
  USING INDEX "PROCESSDB"."CARGA_PK"  ENABLE;
--------------------------------------------------------
--  Constraints for Table CONTRATO
--------------------------------------------------------

  ALTER TABLE "PROCESSDB"."CONTRATO" MODIFY ("ID_CONTRATO" NOT NULL ENABLE);
  ALTER TABLE "PROCESSDB"."CONTRATO" MODIFY ("TIPO_CONTRATO" NOT NULL ENABLE);
  ALTER TABLE "PROCESSDB"."CONTRATO" MODIFY ("FEC_INI" NOT NULL ENABLE);
  ALTER TABLE "PROCESSDB"."CONTRATO" ADD CONSTRAINT "CONTRATO_PK" PRIMARY KEY ("ID_CONTRATO")
  USING INDEX "PROCESSDB"."CONTRATO_PK"  ENABLE;
--------------------------------------------------------
--  Constraints for Table FLUJO
--------------------------------------------------------

  ALTER TABLE "PROCESSDB"."FLUJO" MODIFY ("ID_FLUJO" NOT NULL ENABLE);
  ALTER TABLE "PROCESSDB"."FLUJO" MODIFY ("DESCRIPCION" NOT NULL ENABLE);
  ALTER TABLE "PROCESSDB"."FLUJO" MODIFY ("FEC_CREACION" NOT NULL ENABLE);
  ALTER TABLE "PROCESSDB"."FLUJO" MODIFY ("FEC_INI" NOT NULL ENABLE);
  ALTER TABLE "PROCESSDB"."FLUJO" MODIFY ("FEC_TER" NOT NULL ENABLE);
  ALTER TABLE "PROCESSDB"."FLUJO" MODIFY ("ESTADO" NOT NULL ENABLE);
  ALTER TABLE "PROCESSDB"."FLUJO" ADD CONSTRAINT "FLUJO_PK" PRIMARY KEY ("ID_FLUJO")
  USING INDEX "PROCESSDB"."FLUJO_PK"  ENABLE;
--------------------------------------------------------
--  Constraints for Table RESPONSABLE_FLUJO
--------------------------------------------------------

  ALTER TABLE "PROCESSDB"."RESPONSABLE_FLUJO" MODIFY ("ID_RES_FLUJO" NOT NULL ENABLE);
  ALTER TABLE "PROCESSDB"."RESPONSABLE_FLUJO" MODIFY ("FK_USR" NOT NULL ENABLE);
  ALTER TABLE "PROCESSDB"."RESPONSABLE_FLUJO" MODIFY ("FK_FLUJO" NOT NULL ENABLE);
  ALTER TABLE "PROCESSDB"."RESPONSABLE_FLUJO" ADD CONSTRAINT "RESPONSABLE_FLUJO_PK" PRIMARY KEY ("ID_RES_FLUJO")
  USING INDEX "PROCESSDB"."RESPONSABLE_FLUJO_PK"  ENABLE;
  ALTER TABLE "PROCESSDB"."RESPONSABLE_FLUJO" ADD CONSTRAINT "RESPONSABLE_FLUJO_FK_FLUJO_UN" UNIQUE ("FK_FLUJO")
  USING INDEX "PROCESSDB"."RESPONSABLE_FLUJO_FK_FLUJO_UN"  ENABLE;
  ALTER TABLE "PROCESSDB"."RESPONSABLE_FLUJO" ADD CONSTRAINT "RESPONSABLE_FLUJO_FK_USR_UN" UNIQUE ("FK_USR")
  USING INDEX "PROCESSDB"."RESPONSABLE_FLUJO_FK_USR_UN"  ENABLE;
--------------------------------------------------------
--  Constraints for Table RESPONSABLE_TAREA
--------------------------------------------------------

  ALTER TABLE "PROCESSDB"."RESPONSABLE_TAREA" MODIFY ("ID_RES_TAREA" NOT NULL ENABLE);
  ALTER TABLE "PROCESSDB"."RESPONSABLE_TAREA" MODIFY ("FK_USR_RT" NOT NULL ENABLE);
  ALTER TABLE "PROCESSDB"."RESPONSABLE_TAREA" MODIFY ("FK_TAREA_RT" NOT NULL ENABLE);
  ALTER TABLE "PROCESSDB"."RESPONSABLE_TAREA" ADD CONSTRAINT "RESPONSABLE_TAREA_PK" PRIMARY KEY ("ID_RES_TAREA")
  USING INDEX "PROCESSDB"."RESPONSABLE_TAREA_PK"  ENABLE;
  ALTER TABLE "PROCESSDB"."RESPONSABLE_TAREA" ADD CONSTRAINT "RESPONSABLE_TAREA_FK_TAREA_UN" UNIQUE ("FK_TAREA_RT")
  USING INDEX "PROCESSDB"."RESPONSABLE_TAREA_FK_TAREA_UN"  ENABLE;
  ALTER TABLE "PROCESSDB"."RESPONSABLE_TAREA" ADD CONSTRAINT "RESPONSABLE_TAREA_FK_USR_UN" UNIQUE ("FK_USR_RT")
  USING INDEX "PROCESSDB"."RESPONSABLE_TAREA_FK_USR_UN"  ENABLE;
--------------------------------------------------------
--  Constraints for Table ROL
--------------------------------------------------------

  ALTER TABLE "PROCESSDB"."ROL" MODIFY ("ID_ROL" NOT NULL ENABLE);
  ALTER TABLE "PROCESSDB"."ROL" MODIFY ("NOMBRE_ROL" NOT NULL ENABLE);
  ALTER TABLE "PROCESSDB"."ROL" ADD CONSTRAINT "ROL_PK" PRIMARY KEY ("ID_ROL")
  USING INDEX "PROCESSDB"."ROL_PK"  ENABLE;
--------------------------------------------------------
--  Constraints for Table TAREA
--------------------------------------------------------

  ALTER TABLE "PROCESSDB"."TAREA" MODIFY ("ID_TAREA" NOT NULL ENABLE);
  ALTER TABLE "PROCESSDB"."TAREA" MODIFY ("DESCRIPCION" NOT NULL ENABLE);
  ALTER TABLE "PROCESSDB"."TAREA" MODIFY ("PRIORIDAD" NOT NULL ENABLE);
  ALTER TABLE "PROCESSDB"."TAREA" MODIFY ("CATEGORIA" NOT NULL ENABLE);
  ALTER TABLE "PROCESSDB"."TAREA" MODIFY ("FEC_CREACION" NOT NULL ENABLE);
  ALTER TABLE "PROCESSDB"."TAREA" MODIFY ("FEC_INI" NOT NULL ENABLE);
  ALTER TABLE "PROCESSDB"."TAREA" MODIFY ("FEC_TER" NOT NULL ENABLE);
  ALTER TABLE "PROCESSDB"."TAREA" MODIFY ("ESTADO" NOT NULL ENABLE);
  ALTER TABLE "PROCESSDB"."TAREA" ADD CONSTRAINT "TAREA_PK" PRIMARY KEY ("ID_TAREA")
  USING INDEX "PROCESSDB"."TAREA_PK"  ENABLE;
--------------------------------------------------------
--  Constraints for Table TAREA_ASOC
--------------------------------------------------------

  ALTER TABLE "PROCESSDB"."TAREA_ASOC" MODIFY ("ID_TAREA_ASOC" NOT NULL ENABLE);
  ALTER TABLE "PROCESSDB"."TAREA_ASOC" MODIFY ("ESTADO" NOT NULL ENABLE);
  ALTER TABLE "PROCESSDB"."TAREA_ASOC" ADD CONSTRAINT "TAREA_ASOC_PK" PRIMARY KEY ("ID_TAREA_ASOC")
  USING INDEX "PROCESSDB"."TAREA_ASOC_PK"  ENABLE;
--------------------------------------------------------
--  Constraints for Table TAREA_ROL
--------------------------------------------------------

  ALTER TABLE "PROCESSDB"."TAREA_ROL" MODIFY ("ID_TR" NOT NULL ENABLE);
  ALTER TABLE "PROCESSDB"."TAREA_ROL" ADD CONSTRAINT "TAREA_ROL_PK" PRIMARY KEY ("ID_TR")
  USING INDEX "PROCESSDB"."TAREA_ROL_PK"  ENABLE;
--------------------------------------------------------
--  Constraints for Table UNIDAD_INTERNA
--------------------------------------------------------

  ALTER TABLE "PROCESSDB"."UNIDAD_INTERNA" MODIFY ("ID_UNIDAD" NOT NULL ENABLE);
  ALTER TABLE "PROCESSDB"."UNIDAD_INTERNA" MODIFY ("NOMBRE_UNIDAD" NOT NULL ENABLE);
  ALTER TABLE "PROCESSDB"."UNIDAD_INTERNA" ADD CONSTRAINT "UNIDAD_INTERNA_PK" PRIMARY KEY ("ID_UNIDAD")
  USING INDEX "PROCESSDB"."UNIDAD_INTERNA_PK"  ENABLE;
--------------------------------------------------------
--  Constraints for Table USUARIO
--------------------------------------------------------

  ALTER TABLE "PROCESSDB"."USUARIO" MODIFY ("ID_USR" NOT NULL ENABLE);
  ALTER TABLE "PROCESSDB"."USUARIO" MODIFY ("NOMBRE_FULL" NOT NULL ENABLE);
  ALTER TABLE "PROCESSDB"."USUARIO" MODIFY ("RUT" NOT NULL ENABLE);
  ALTER TABLE "PROCESSDB"."USUARIO" MODIFY ("USERNAME" NOT NULL ENABLE);
  ALTER TABLE "PROCESSDB"."USUARIO" MODIFY ("PASSWORD" NOT NULL ENABLE);
  ALTER TABLE "PROCESSDB"."USUARIO" MODIFY ("FEC_NAC" NOT NULL ENABLE);
  ALTER TABLE "PROCESSDB"."USUARIO" MODIFY ("GENERO" NOT NULL ENABLE);
  ALTER TABLE "PROCESSDB"."USUARIO" MODIFY ("FK_ROL" NOT NULL ENABLE);
  ALTER TABLE "PROCESSDB"."USUARIO" MODIFY ("FK_UNIDAD" NOT NULL ENABLE);
  ALTER TABLE "PROCESSDB"."USUARIO" MODIFY ("FK_CONTRATO" NOT NULL ENABLE);
  ALTER TABLE "PROCESSDB"."USUARIO" ADD CONSTRAINT "USUARIO_PK" PRIMARY KEY ("ID_USR")
  USING INDEX "PROCESSDB"."USUARIO_PK"  ENABLE;
--------------------------------------------------------
--  Ref Constraints for Table AVANCE
--------------------------------------------------------

  ALTER TABLE "PROCESSDB"."AVANCE" ADD CONSTRAINT "FK_TAREA" FOREIGN KEY ("FK_TAREA")
	  REFERENCES "PROCESSDB"."TAREA" ("ID_TAREA") ON DELETE CASCADE ENABLE;
--------------------------------------------------------
--  Ref Constraints for Table CARGA
--------------------------------------------------------

  ALTER TABLE "PROCESSDB"."CARGA" ADD CONSTRAINT "FK_USUARIO" FOREIGN KEY ("FK_USUARIO_C")
	  REFERENCES "PROCESSDB"."RESPONSABLE_TAREA" ("FK_USR_RT") ON DELETE CASCADE ENABLE;
--------------------------------------------------------
--  Ref Constraints for Table RESPONSABLE_FLUJO
--------------------------------------------------------

  ALTER TABLE "PROCESSDB"."RESPONSABLE_FLUJO" ADD CONSTRAINT "RESPONSABLE_FLUJO_FLUJO_FK" FOREIGN KEY ("FK_FLUJO")
	  REFERENCES "PROCESSDB"."FLUJO" ("ID_FLUJO") ENABLE;
  ALTER TABLE "PROCESSDB"."RESPONSABLE_FLUJO" ADD CONSTRAINT "RESPONSABLE_FLUJO_USUARIO_FK" FOREIGN KEY ("FK_USR")
	  REFERENCES "PROCESSDB"."USUARIO" ("ID_USR") ENABLE;
--------------------------------------------------------
--  Ref Constraints for Table RESPONSABLE_TAREA
--------------------------------------------------------

  ALTER TABLE "PROCESSDB"."RESPONSABLE_TAREA" ADD CONSTRAINT "RESPONSABLE_TAREA_TAREA_FK" FOREIGN KEY ("FK_TAREA_RT")
	  REFERENCES "PROCESSDB"."TAREA" ("ID_TAREA") ENABLE;
  ALTER TABLE "PROCESSDB"."RESPONSABLE_TAREA" ADD CONSTRAINT "RESPONSABLE_TAREA_USUARIO_FK" FOREIGN KEY ("FK_USR_RT")
	  REFERENCES "PROCESSDB"."USUARIO" ("ID_USR") ENABLE;
--------------------------------------------------------
--  Ref Constraints for Table TAREA_ASOC
--------------------------------------------------------

  ALTER TABLE "PROCESSDB"."TAREA_ASOC" ADD CONSTRAINT "FK_TAR_ASC_TO_FLUX" FOREIGN KEY ("FK_FLUJO")
	  REFERENCES "PROCESSDB"."FLUJO" ("ID_FLUJO") ON DELETE CASCADE ENABLE;
  ALTER TABLE "PROCESSDB"."TAREA_ASOC" ADD CONSTRAINT "FK_TAR_ASC_TO_TAR" FOREIGN KEY ("FK_TAREA")
	  REFERENCES "PROCESSDB"."TAREA" ("ID_TAREA") ON DELETE CASCADE ENABLE;
--------------------------------------------------------
--  Ref Constraints for Table USUARIO
--------------------------------------------------------

  ALTER TABLE "PROCESSDB"."USUARIO" ADD CONSTRAINT "USUARIO_CONTRATO_FK" FOREIGN KEY ("FK_CONTRATO")
	  REFERENCES "PROCESSDB"."CONTRATO" ("ID_CONTRATO") ENABLE;
  ALTER TABLE "PROCESSDB"."USUARIO" ADD CONSTRAINT "USUARIO_ROL_FK" FOREIGN KEY ("FK_ROL")
	  REFERENCES "PROCESSDB"."ROL" ("ID_ROL") ENABLE;
  ALTER TABLE "PROCESSDB"."USUARIO" ADD CONSTRAINT "USUARIO_UNIDAD_INTERNA_FK" FOREIGN KEY ("FK_UNIDAD")
	  REFERENCES "PROCESSDB"."UNIDAD_INTERNA" ("ID_UNIDAD") ENABLE;
